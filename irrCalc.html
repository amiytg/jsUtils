<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <script language="JavaScript" >
        function NPV(discountRate, cashFlow) {
            var npv = 0;
            console.log("discountRate=" + discountRate)
            console.log("cashFlow length=" + cashFlow.length)
            for (var t = 0; t < cashFlow.length; t++) {
                npv += cashFlow[t].value / Math.pow((1 + discountRate), t);
            }
            console.log(npv)
            return npv;
        }


        function IRR(cashFlow, guess) {
            guess = guess ? guess : 0.1;
            var npv;
            var cnt = 0;
            do {
                npv = NPV(guess, cashFlow);
                guess += 0.001;

                cnt++;
            }
            while (npv > 0)

            return guess;
        }
    </script>
</head>
<body>
    <form name="npv">
        Discount         <input type="number" name="discountRate" /><br />

        1. <input type="number" name="cashflow[]" /><br />
        2. <input type="number" name="cashflow[]" /><br />
        3. <input type="number" name="cashflow[]" /><br />
        4. <input type="number" name="cashflow[]" /><br />
        5. <input type="number" name="cashflow[]" /><br />
        6. <input type="number" name="cashflow[]" /><br />
        7. <input type="number" name="cashflow[]" /><br />
        8. <input type="number" name="cashflow[]" /><br />
        <input type=button value="Calculate IRR" onclick="document.getElementById('npv').innerHTML = NPV(this.form.elements['discountRate'].value, this.form.elements['cashflow[]']); document.getElementById('irr').innerHTML = IRR(this.form.elements['cashflow[]'])" />
    </form>
    NPV=<span id="npv"></span><br />
    IRR=<span id="irr"></span>
</body>
</html>
